(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{uTK4:function(t,e,o){"use strict";o.r(e),o.d(e,"AddProductPageModule",(function(){return p}));var i=o("ofXK"),r=o("3Pt+"),n=o("TEn/"),s=o("tyNb"),c=o("fXoL"),d=o("3LUQ"),a=o("qL+e");function l(t,e){if(1&t&&(c.Ob(0,"ion-select-option",15),c.jc(1),c.Nb()),2&t){const t=e.$implicit;c.dc("value",t.id),c.xb(1),c.kc(t.name)}}function u(t,e){if(1&t&&(c.Ob(0,"ion-select-option",16),c.jc(1),c.Nb()),2&t){const t=e.$implicit;c.dc("value",t.id),c.xb(1),c.kc(t.product_name)}}function b(t,e){if(1&t&&(c.Ob(0,"div",17),c.Kb(1,"img",18),c.Nb()),2&t){const t=c.Zb();c.xb(1),c.dc("src",t.image,c.gc)}}const g=[{path:"",component:(()=>{class t{constructor(t,e,o,i){if(this.loading=t,this.formBuilder=e,this.router=o,this.product=i,this.addProductForm=this.formBuilder.group({id:[""],category_id:["",[r.n.required]],product_id:["",[r.n.required]],image:[""],cost:["",[r.n.required]],sale_price:["",[r.n.required]],prouct_desc:[""],qty:["",[r.n.required]]}),this.router.getCurrentNavigation().extras.state){let t=this.router.getCurrentNavigation().extras.state.product;this.editdata=t}console.log(this.editdata)}ionViewWillEnter(){this.getCategoryProducts(),this.addProductForm.controls.image.setValue(this.editdata?this.editdata.image:""),this.addProductForm.controls.sale_price.setValue(this.editdata?this.editdata.sale_price:""),this.addProductForm.controls.prouct_desc.setValue(this.editdata?this.editdata.product_description:""),this.addProductForm.controls.qty.setValue(this.editdata?this.editdata.qty:""),this.addProductForm.controls.cost.setValue(this.editdata?this.editdata.unit_price:"")}doRefresh(t){console.log("Begin async operation"),setTimeout(()=>{console.log("Async operation has ended"),t.target.complete()},2e3)}loadData(t){setTimeout(()=>{console.log("Done"),console.log(t),t.target.complete()},2e3)}getCategoryProducts(){this.loading.present(),this.product.getCategoryProducts().subscribe(t=>{console.log(t.data),this.categoryProducts=t.data,this.loading.dismiss()},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.presentToastError("Server error."),this.loading.dismiss())})}selectProducts(t){console.log(t);for(let e=0;e<this.categoryProducts.length;e++)if(this.categoryProducts[e].id==t){this.addProductForm.controls.product_id.setValue(""),this.products=this.categoryProducts[e].products;break}console.log(this.products)}selectProduct(t){this.addProductForm.controls.cost.setValue(""),this.addProductForm.controls.image.setValue("");for(let e=0;e<this.products.length;e++)if(this.products[e].id==t){this.selectPro=this.products[e];break}this.addProductForm.controls.cost.setValue(this.selectPro?this.selectPro.unit_price:""),this.addProductForm.controls.image.setValue(this.selectPro?this.selectPro.image:""),this.image=this.selectPro.image,console.log(this.addProductForm.value)}addProduct(){console.log(this.addProductForm.value),this.loading.present(),this.product.addNewProduct(this.addProductForm.value).subscribe(t=>{console.log(t),this.loading.dismiss(),"success"==t.type&&(this.loading.presentToastSuccess(t.msg),this.router.navigateByUrl("/dashboard")),"error"==t.type&&this.loading.presentToastError(t.msg)},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.dismiss(),this.loading.presentToastError("Server error."))})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(d.a),c.Jb(r.b),c.Jb(s.g),c.Jb(a.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-add-product"]],decls:45,vars:5,consts:[["slot","start"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","circles"],[1,"mt-2",3,"formGroup","ngSubmit"],["interface","popover","placeholder","Select Catagory","formControlName","category_id",3,"ngModelChange"],["selected","selected",3,"value",4,"ngFor","ngForOf"],["interface","popover","placeholder","Select Product Name","formControlName","product_id",3,"ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","floating"],["required","true","value","Readonly","readonly","","type","number","formControlName","cost"],["required","true","type","number","formControlName","sale_price"],["value","Readonly","readonly","","type","text","formControlName","prouct_desc"],["required","true","type","number","formControlName","qty"],["class","imgStyle",4,"ngIf"],["type","submit","shape","round","slot","end",2,"margin-left","61vw","margin-bottom","2px",3,"disabled"],["selected","selected",3,"value"],[3,"value"],[1,"imgStyle"],[3,"src"]],template:function(t,e){1&t&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-buttons",0),c.Kb(3,"ion-menu-button"),c.Nb(),c.Ob(4,"ion-title"),c.jc(5,"Add New Product"),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content"),c.Ob(7,"ion-refresher",1),c.Wb("ionRefresh",(function(t){return e.doRefresh(t)})),c.Kb(8,"ion-refresher-content",2),c.Nb(),c.Ob(9,"form",3),c.Wb("ngSubmit",(function(){return e.addProduct()})),c.Ob(10,"ion-card"),c.Ob(11,"ion-item"),c.Ob(12,"ion-label"),c.jc(13,"Product Catagory"),c.Nb(),c.Ob(14,"ion-select",4),c.Wb("ngModelChange",(function(t){return e.selectProducts(t)})),c.ic(15,l,2,2,"ion-select-option",5),c.Nb(),c.Nb(),c.Nb(),c.Ob(16,"ion-card"),c.Ob(17,"ion-item"),c.Ob(18,"ion-label"),c.jc(19,"Product Name"),c.Nb(),c.Ob(20,"ion-select",6),c.Wb("ngModelChange",(function(t){return e.selectProduct(t)})),c.ic(21,u,2,2,"ion-select-option",7),c.Nb(),c.Nb(),c.Nb(),c.Ob(22,"ion-card"),c.Ob(23,"ion-item"),c.Ob(24,"ion-label",8),c.jc(25,"Cost"),c.Nb(),c.Kb(26,"ion-input",9),c.Nb(),c.Nb(),c.Ob(27,"ion-card"),c.Ob(28,"ion-item"),c.Ob(29,"ion-label",8),c.jc(30,"Sale Price"),c.Nb(),c.Kb(31,"ion-input",10),c.Nb(),c.Nb(),c.Ob(32,"ion-card"),c.Ob(33,"ion-item"),c.Ob(34,"ion-label",8),c.jc(35,"Product Description"),c.Nb(),c.Kb(36,"ion-input",11),c.Nb(),c.Nb(),c.Ob(37,"ion-card"),c.Ob(38,"ion-item"),c.Ob(39,"ion-label",8),c.jc(40,"Current Inventory"),c.Nb(),c.Kb(41,"ion-input",12),c.Nb(),c.Nb(),c.ic(42,b,2,1,"div",13),c.Ob(43,"ion-button",14),c.jc(44,"Submit"),c.Nb(),c.Nb(),c.Nb()),2&t&&(c.xb(9),c.cc("formGroup",e.addProductForm),c.xb(6),c.cc("ngForOf",e.categoryProducts),c.xb(6),c.cc("ngForOf",e.products),c.xb(21),c.cc("ngIf",e.image),c.xb(1),c.cc("disabled",!e.addProductForm.valid))},directives:[n.m,n.K,n.d,n.v,n.J,n.h,n.y,n.z,r.o,r.i,r.d,n.e,n.r,n.s,n.F,n.S,r.h,r.c,i.h,n.q,n.P,r.m,n.T,i.i,n.c,n.G],styles:["ion-item[_ngcontent-%COMP%]{border-radius:5px!important;font-size:4vw;border:1px solid #bdb8b8!important;--background:rgb(255 255 255)!important}.item-native[_ngcontent-%COMP%]{padding:16px}.item-inner[_ngcontent-%COMP%]{padding:0!important}ion-icon[_ngcontent-%COMP%]{margin:5vw 1vw 1vw 0}.imgStyle[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{height:14vh;width:14vh}ion-select[_ngcontent-%COMP%]{float:right;right:10px;position:absolute}"]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(g)],s.i]}),t})();var m=o("tk/3");let p=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[r.l,s.i,m.b,i.b,r.e,n.L,h]]}),t})()}}]);