(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{gv6F:function(t,e,i){"use strict";i.r(e),i.d(e,"SimSwapPageModule",(function(){return v}));var o=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),r=i("mPz0"),c=i("fXoL"),b=i("tk/3"),l=i("vkgz"),m=i("5zL6");let p=(()=>{class t{constructor(t,e){this.http=t,this.env=e,this.ifLogin=JSON.parse(localStorage.getItem("user"))}uploadDocuments(t){const e=new b.c({Authorization:this.ifLogin.token_type+" "+this.ifLogin.access_token});return this.http.post(this.env.API_URL+"auth/upload-documents",t,{headers:e}).pipe(Object(l.a)(t=>t))}addSimDetails(t){const e=new b.c({Authorization:this.ifLogin.token_type+" "+this.ifLogin.access_token});return this.http.post(this.env.API_URL+"auth/add-sim_details",t,{headers:e}).pipe(Object(l.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(b.a),c.Ob(m.a))},t.\u0275prov=c.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("BLr9"),d=i("QzWm"),h=i("3LUQ"),g=i("TzAO"),f=i("Wwn5"),_=i("I7pt"),S=i("KqBo");function y(t,e){if(1&t&&(c.Kb(0,"span"),c.Ib(1,"img",10),c.Jb()),2&t){const t=c.Ub();c.xb(1),c.Zb("src",t.photoFontSite,c.gc)}}function J(t,e){if(1&t&&(c.Kb(0,"span"),c.Ib(1,"img",10),c.Jb()),2&t){const t=c.Ub();c.xb(1),c.Zb("src",t.photoBackSite,c.gc)}}function T(t,e){if(1&t&&(c.Kb(0,"span"),c.Ib(1,"img",10),c.Jb()),2&t){const t=c.Ub();c.xb(1),c.Zb("src",t.OldSimOrGd,c.gc)}}function K(t,e){if(1&t){const t=c.Lb();c.Kb(0,"ion-item"),c.Kb(1,"div"),c.Kb(2,"ion-button",11),c.Sb("click",(function(){return c.fc(t),c.Ub().uploadDocuments()})),c.jc(3,"Upload Documents"),c.Jb(),c.Jb(),c.Jb()}}function x(t,e){if(1&t){const t=c.Lb();c.Kb(0,"div"),c.Kb(1,"ion-item"),c.Kb(2,"ion-button",12),c.Sb("click",(function(){return c.fc(t),c.Ub().scannQeCode()})),c.jc(3,"Scann QR Code"),c.Jb(),c.Jb(),c.Kb(4,"ion-item"),c.Kb(5,"ion-label",13),c.jc(6,"Customer Name"),c.Jb(),c.Ib(7,"ion-input",14),c.Jb(),c.Kb(8,"ion-item"),c.Kb(9,"ion-label",13),c.jc(10,"Customer Swap Phone Number"),c.Jb(),c.Ib(11,"ion-input",15),c.Jb(),c.Kb(12,"ion-item"),c.Kb(13,"ion-label",13),c.jc(14,"Customer Aadhar Number"),c.Jb(),c.Ib(15,"ion-input",16),c.Jb(),c.Kb(16,"ion-item"),c.Kb(17,"ion-label",13),c.jc(18,"Customer New Sim Number"),c.Jb(),c.Ib(19,"ion-input",17),c.Jb(),c.Kb(20,"ion-item"),c.Kb(21,"ion-label"),c.jc(22,"Customer Sex"),c.Jb(),c.Kb(23,"ion-select",18),c.Kb(24,"ion-select-option",19),c.jc(25," Male "),c.Jb(),c.Kb(26,"ion-select-option",20),c.jc(27," Fimale "),c.Jb(),c.Kb(28,"ion-select-option",21),c.jc(29," Others "),c.Jb(),c.Jb(),c.Jb(),c.Kb(30,"ion-item"),c.Kb(31,"ion-label",13),c.jc(32,"Father Name (optional)"),c.Jb(),c.Ib(33,"ion-input",22),c.Jb(),c.Kb(34,"ion-item"),c.Kb(35,"ion-label",13),c.jc(36,"Customer Village (optional)"),c.Jb(),c.Ib(37,"ion-input",23),c.Jb(),c.Kb(38,"ion-item"),c.Kb(39,"ion-label",13),c.jc(40,"Customer Post Office (optional)"),c.Jb(),c.Ib(41,"ion-input",24),c.Jb(),c.Kb(42,"ion-item"),c.Kb(43,"ion-label",13),c.jc(44,"Customer Police Station (optional)"),c.Jb(),c.Ib(45,"ion-input",25),c.Jb(),c.Kb(46,"ion-item"),c.Kb(47,"ion-label",13),c.jc(48,"Customer Dist (optional)"),c.Jb(),c.Ib(49,"ion-input",26),c.Jb(),c.Kb(50,"ion-item"),c.Kb(51,"ion-label",13),c.jc(52,"Customer state (optional)"),c.Jb(),c.Ib(53,"ion-input",27),c.Jb(),c.Kb(54,"ion-item"),c.Kb(55,"ion-label",13),c.jc(56,"Customer Pin (optional)"),c.Jb(),c.Ib(57,"ion-input",28),c.Jb(),c.Kb(58,"ion-item"),c.Kb(59,"ion-label"),c.jc(60,"Customer DOB (optional)"),c.Jb(),c.Ib(61,"ion-datetime",29),c.Jb(),c.Jb()}}const w=[{path:"",component:(()=>{class t{constructor(t,e,i,o,s,a,r,c,b,l,m,p,u,d){this.SimService=t,this.platform=e,this.qrScanner=i,this.env=o,this.payment=s,this.loading=a,this.contacts=r,this.callNumber=c,this.sms=b,this.toastCtrl=l,this.modalController=m,this.camera=p,this.formBuilder=u,this.router=d,this.simSwapForm=this.formBuilder.group({c_name:["",[n.j.required]],c_swap_phone:["",n.j.required],c_new_sim_no:["",n.j.required],c_uid_number:["",n.j.required],c_sex:["",n.j.required],c_f_name:[""],c_village:[""],c_post:[""],c_ps:[""],c_dist:[""],c_state:[""],c_pin:[""],c_dob:[""],c_immage_id:[""]}),this.paymetURL=this.env.paymetURL,this.platform.backButton.subscribeWithPriority(0,()=>{document.getElementsByTagName("body")[0].style.opacity="1",this.scannData.unsubscribe()})}doRefresh(t){console.log("Begin async operation"),setTimeout(()=>{console.log("Async operation has ended"),t.target.complete()},2e3)}captureFontImmage(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(t=>{this.photoFontSite="data:image/jpeg;base64,"+t,this.uploadFontPhoto=t},t=>{console.log(t),this.loading.presentToastWarning(t)})}captureBackImmage(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(t=>{this.photoBackSite="data:image/jpeg;base64,"+t,this.uploadBackPhoto=t},t=>{console.log(t),this.loading.presentToastWarning(t)})}captureOldsimOrGd(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(t=>{this.OldSimOrGd="data:image/jpeg;base64,"+t,this.uploadSimOrGdPhoto=t},t=>{console.log(t),this.loading.presentToastWarning(t)})}scannQeCode(){this.qrScanner.prepare().then(t=>{t.authorized&&(this.qrScanner.show(),this.scannData=document.getElementsByTagName("body")[0].style.opacity="0",this.scannData=this.qrScanner.scan().subscribe(t=>{document.getElementsByTagName("body")[0].style.opacity="1",this.qrScanner.hide(),this.scannData.unsubscribe();let e=t,i=(new r).xml2js(e);this.qrText=i.PrintLetterBarcodeData,this.qrText&&(this.simSwapForm.controls.c_name.setValue(this.qrText?this.qrText._name:""),this.simSwapForm.controls.c_uid_number.setValue(this.qrText?this.qrText._uid:""),this.simSwapForm.controls.c_sex.setValue(this.qrText?this.qrText._gender:""),this.simSwapForm.controls.c_f_name.setValue(this.qrText?this.qrText._gname:""),this.simSwapForm.controls.c_village.setValue(this.qrText?this.qrText._vtc:""),this.simSwapForm.controls.c_post.setValue(this.qrText?this.qrText._po:""),this.simSwapForm.controls.c_ps.setValue(this.qrText?this.qrText._subdist:""),this.simSwapForm.controls.c_dist.setValue(this.qrText?this.qrText._dist:""),this.simSwapForm.controls.c_state.setValue(this.qrText?this.qrText._state:""),this.simSwapForm.controls.c_pin.setValue(this.qrText?this.qrText._pc:""),this.simSwapForm.controls.c_dob.setValue(this.qrText?this.qrText._dob:""),document.getElementsByTagName("body")[0].style.opacity="1",this.scannData.unsubscribe())},t=>{alert(JSON.stringify(t))}))}).catch(t=>console.log("Error is",t))}ionViewWillEnter(){}uploadDocuments(){this.loading.present();const t=new FormData;t.append("uploadFontPhoto",this.uploadFontPhoto),t.append("uploadBackPhoto",this.uploadBackPhoto),t.append("uploadSimOrGdPhoto",this.uploadSimOrGdPhoto),this.SimService.uploadDocuments(t).subscribe(t=>{console.log(t),alert(t.image_id),alert(t.image_id[0].font_image),t.success&&(this.simSwapForm.controls.c_immage_id.setValue(t?t.image_id:""),this.uploadId=t.image_id,this.loading.dismiss(),this.loading.presentToastSuccess(t.success)),t.error&&(this.loading.dismiss(),this.loading.presentToastError(t.error))},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.dismiss(),this.loading.presentToastError("Server error."))})}addSimSwapData(){this.loading.present(),this.SimService.addSimDetails(this.simSwapForm.value).subscribe(t=>{console.log(t),this.loading.dismiss(),t.success&&(this.loading.dismiss(),this.loading.presentToastSuccess(t.success),this.router.navigateByUrl("/show-products")),t.error&&(this.loading.dismiss(),this.loading.presentToastWarning(t.error))},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.dismiss(),this.loading.presentToastError("Server error."))})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(p),c.Hb(s.W),c.Hb(u.a),c.Hb(m.a),c.Hb(d.a),c.Hb(h.a),c.Hb(g.c),c.Hb(f.a),c.Hb(_.a),c.Hb(s.ab),c.Hb(s.T),c.Hb(S.a),c.Hb(n.a),c.Hb(a.g))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-sim-swap"]],decls:36,vars:7,consts:[["slot","start"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","s","","refreshingSpinner","circles"],[3,"formGroup","ngSubmit"],[2,"margin-top","10px"],[1,"choseCamera"],["name","camera-outline",1,"choseCamera",3,"click"],[4,"ngIf"],["name","camera-outline",3,"click"],["type","submit","shape","round","color","success","expand","block",3,"disabled"],["height","60","width","60",1,"imageClasss",3,"src"],[3,"click"],["size","small","color","secondary","shape","round",3,"click"],["position","floating"],["type","text","formControlName","c_name"],["type","number","formControlName","c_swap_phone"],["type","number","formControlName","c_uid_number"],["type","number","formControlName","c_new_sim_no"],["formControlName","c_sex","interface","popover","placeholder","Select Gender"],["value","Male"],["value","Fimale"],["value","Others"],["type","text","formControlName","c_f_name"],["type","text","formControlName","c_village"],["type","text","formControlName","c_post"],["type","text","formControlName","c_ps"],["type","text","formControlName","c_dist"],["type","text","formControlName","c_state"],["type","number","formControlName","c_pin"],["formControlName","c_dob","displayFormat","DD/MM/YYYY"]],template:function(t,e){1&t&&(c.Kb(0,"ion-header"),c.Kb(1,"ion-toolbar"),c.Kb(2,"ion-buttons",0),c.Ib(3,"ion-menu-button"),c.Jb(),c.Kb(4,"ion-title"),c.jc(5,"Sim Swap"),c.Jb(),c.Jb(),c.Jb(),c.Kb(6,"ion-content"),c.Kb(7,"ion-refresher",1),c.Sb("ionRefresh",(function(t){return e.doRefresh(t)})),c.Ib(8,"ion-refresher-content",2),c.Jb(),c.Kb(9,"form",3),c.Sb("ngSubmit",(function(){return e.addSimSwapData()})),c.Kb(10,"ion-card",4),c.Kb(11,"ion-item"),c.Kb(12,"div",5),c.Kb(13,"ion-icon",6),c.Sb("click",(function(){return e.captureFontImmage()})),c.Jb(),c.Jb(),c.Kb(14,"strong"),c.jc(15,"Capture Font Site"),c.Jb(),c.Kb(16,"div"),c.ic(17,y,2,1,"span",7),c.Jb(),c.Jb(),c.Kb(18,"ion-item"),c.Kb(19,"div",5),c.Kb(20,"ion-icon",8),c.Sb("click",(function(){return e.captureBackImmage()})),c.Jb(),c.Jb(),c.Kb(21,"strong"),c.jc(22,"Capture Back Site"),c.Jb(),c.Kb(23,"div"),c.ic(24,J,2,1,"span",7),c.Jb(),c.Jb(),c.Kb(25,"ion-item"),c.Kb(26,"div",5),c.Kb(27,"ion-icon",8),c.Sb("click",(function(){return e.captureOldsimOrGd()})),c.Jb(),c.Jb(),c.Kb(28,"strong"),c.jc(29,"Capture old SIM or GD copy"),c.Jb(),c.Kb(30,"div"),c.ic(31,T,2,1,"span",7),c.Jb(),c.Jb(),c.ic(32,K,4,0,"ion-item",7),c.ic(33,x,62,0,"div",7),c.Jb(),c.Kb(34,"ion-button",9),c.jc(35,"Submit"),c.Jb(),c.Jb(),c.Jb()),2&t&&(c.xb(9),c.Zb("formGroup",e.simSwapForm),c.xb(8),c.Zb("ngIf",e.photoFontSite),c.xb(7),c.Zb("ngIf",e.photoBackSite),c.xb(7),c.Zb("ngIf",e.OldSimOrGd),c.xb(1),c.Zb("ngIf",e.OldSimOrGd&&e.photoBackSite&&e.photoFontSite),c.xb(1),c.Zb("ngIf",e.uploadId),c.xb(1),c.Zb("disabled",!e.simSwapForm.valid))},directives:[s.o,s.P,s.d,s.B,s.O,s.j,s.E,s.F,n.k,n.h,n.c,s.e,s.t,s.p,o.j,s.c,s.x,s.s,s.Z,n.g,n.b,s.V,s.I,s.Y,s.J,s.k],styles:["ion-button[_ngcontent-%COMP%]{font-size:10px}.choseCamera[_ngcontent-%COMP%]{font-size:40px;margin-right:15px}.selectCamera[_ngcontent-%COMP%]{font-size:35px;margin-right:15px}.uploads[_ngcontent-%COMP%]{font-size:30px;margin-left:15px}.imageClasss[_ngcontent-%COMP%]{margin-left:10px;border-radius:25px;border:1px solid #00f}strong[_ngcontent-%COMP%]{font-size:10px}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(w)],a.i]}),t})(),v=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[n.i,a.i,b.b,o.b,n.d,s.Q,C]]}),t})()}}]);