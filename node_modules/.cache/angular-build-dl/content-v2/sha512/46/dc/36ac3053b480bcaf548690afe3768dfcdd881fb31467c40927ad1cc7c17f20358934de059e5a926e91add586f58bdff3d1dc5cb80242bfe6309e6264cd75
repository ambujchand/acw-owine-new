(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{rD2m:function(t,e,o){"use strict";o.r(e),o.d(e,"ProductListPageModule",(function(){return h}));var i=o("ofXK"),r=o("3Pt+"),s=o("TEn/"),n=o("tyNb"),a=o("fXoL"),c=o("3LUQ"),l=o("qL+e");function g(t,e){if(1&t){const t=a.Pb();a.Ob(0,"ion-row",8),a.Ob(1,"ion-col",9),a.Kb(2,"img",10),a.Nb(),a.Ob(3,"ion-col",11),a.Wb("click",(function(){a.fc(t);const o=e.$implicit;return a.Zb().productDetails(o)})),a.Ob(4,"b"),a.jc(5),a.Nb(),a.Ob(6,"p"),a.jc(7),a.Nb(),a.Ob(8,"p"),a.jc(9),a.Nb(),a.Nb(),a.Nb()}if(2&t){const t=e.$implicit;a.xb(2),a.dc("src",t.image,a.gc),a.xb(3),a.kc(t.product_name),a.xb(2),a.lc("Available Quantity : ",t.qty_per_unit,""),a.xb(2),a.lc("Price : $ ",t.unit_price,"")}}const u=[{path:"",component:(()=>{class t{constructor(t,e,o){this.loading=t,this.router=e,this.product=o,this.allProducts=[],this.router.getCurrentNavigation().extras.state&&(this.categoryId=this.router.getCurrentNavigation().extras.state.categoryId,this.cateloguePage=this.router.getCurrentNavigation().extras.state.cataloguePage,this.routerUrl=this.router.getCurrentNavigation().extras.state.routerUrl,console.log(this.routerUrl),console.log(this.categoryId),console.log(this.cateloguePage))}ionViewWillEnter(){this.checkCatagoryId(),1==this.cateloguePage?this.getCatelogueProductDetails():this.getCategoryDetails()}checkCatagoryId(){this.categoryId||this.router.navigateByUrl("/product-catagory")}doRefresh(t){console.log("Begin async operation"),this.getCategoryDetails(),setTimeout(()=>{console.log("Async operation has ended"),t.target.complete()},2e3)}loadData(t){setTimeout(()=>{console.log("Done"),console.log(t),this.getCategoryDetails(),this.products.length==this.products.length&&(t.target.disabled=!0),t.target.complete()},2e3)}findProductName(t){if(console.log(this.allProducts),t.target.value.length>0){var e=[];console.log(this.products);for(let o=0;o<this.products.length;o++)this.products[o].product_name.toLowerCase().slice(0,t.target.value.length)==t.target.value.toLowerCase()&&e.push(this.products[o]);this.allProducts=e,console.log(this.allProducts)}else this.allProducts=this.products}getCatelogueProductDetails(){if(""!=this.categoryId){this.loading.present();const t=new FormData;t.append("category_id",this.categoryId),t.append("skip_id",JSON.stringify(this.value)),this.product.catalogueProducts(t).subscribe(t=>{this.allProducts=t.data,this.products=t.data,t.length>0&&(this.value=this.value+t.data.length,this.allProducts.push(t.data)),this.loading.dismiss()},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.presentToastError("Server error."),this.loading.dismiss())})}else this.router.navigateByUrl("product-catagory")}getCategoryDetails(){if(""!=this.categoryId){this.loading.present();const t=new FormData;t.append("category_id",this.categoryId),t.append("skip_id",JSON.stringify(this.value)),this.product.getProductDetails(t).subscribe(t=>{this.allProducts=t.data,this.products=t.data,t.length>0&&(this.value=this.value+t.data.length,this.allProducts.push(t.data)),this.loading.dismiss()},t=>{0==t.status?(this.loading.presentToastWarning("check your internet connection."),this.loading.dismiss()):500==t.status&&(this.loading.presentToastError("Server error."),this.loading.dismiss())})}else this.router.navigateByUrl("product-catagory")}productDetails(t){console.log(t),console.log("ooooo"),this.router.navigate(["/product-details"],{state:{productDetails:t,routerUrl:this.routerUrl}})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(c.a),a.Jb(n.g),a.Jb(l.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-product-list"]],decls:15,vars:2,consts:[["slot","start"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","circles"],["showCancelButton","focus",3,"ionInput"],["style","background-color: #FAFAFA;",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading..."],[2,"background-color","#FAFAFA"],["size","3"],[1,"imageSize",3,"src"],[1,"textClass",3,"click"]],template:function(t,e){1&t&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-buttons",0),a.Kb(3,"ion-menu-button"),a.Nb(),a.Ob(4,"ion-title"),a.jc(5,"Product List"),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-content",1),a.Ob(7,"ion-refresher",2),a.Wb("ionRefresh",(function(t){return e.doRefresh(t)})),a.Kb(8,"ion-refresher-content",3),a.Nb(),a.Ob(9,"ion-searchbar",4),a.Wb("ionInput",(function(t){return e.findProductName(t)})),a.Nb(),a.Ob(10,"ion-list"),a.Ob(11,"ion-grid"),a.ic(12,g,10,4,"ion-row",5),a.Nb(),a.Nb(),a.Ob(13,"ion-infinite-scroll",6),a.Wb("ionInfinite",(function(t){return e.loadData(t)})),a.Kb(14,"ion-infinite-scroll-content",7),a.Nb(),a.Nb()),2&t&&(a.xb(6),a.cc("fullscreen",!0),a.xb(6),a.cc("ngForOf",e.allProducts))},directives:[s.m,s.K,s.d,s.v,s.J,s.h,s.y,s.z,s.C,s.T,s.t,s.l,i.h,s.o,s.p,s.B,s.g],styles:[".trash[_ngcontent-%COMP%]{color:red;margin-right:2vw}.edit[_ngcontent-%COMP%], .trash[_ngcontent-%COMP%]{font-size:6vw}ion-row[_ngcontent-%COMP%]{background-color:#fafafa;margin-bottom:2vw}b[_ngcontent-%COMP%]{color:#6b3d1a}.iconClass[_ngcontent-%COMP%]{padding:0;margin:5vw 0 0}p[_ngcontent-%COMP%]{padding:1px;margin:1px;font-size:4vw}.imageSize[_ngcontent-%COMP%]{height:22vw;width:20vw}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(u)],n.i]}),t})(),h=(()=>{class t{}return t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({factory:function(e){return new(e||t)},imports:[[i.b,r.e,s.L,d]]}),t})()}}]);