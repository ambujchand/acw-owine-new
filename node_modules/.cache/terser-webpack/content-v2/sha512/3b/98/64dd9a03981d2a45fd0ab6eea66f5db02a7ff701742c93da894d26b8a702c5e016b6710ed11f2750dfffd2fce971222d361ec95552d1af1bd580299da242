{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{gv6F:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"SimSwapPageModule\",(function(){return sim_swap_module_SimSwapPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),x2js=__webpack_require__(\"mPz0\"),core=__webpack_require__(\"fXoL\"),http=__webpack_require__(\"tk/3\"),tap=__webpack_require__(\"vkgz\"),env_service=__webpack_require__(\"5zL6\");let sim_service_SimService=(()=>{class SimService{constructor(http,env){this.http=http,this.env=env,this.ifLogin=JSON.parse(localStorage.getItem(\"user\"))}uploadDocuments(postData){const headers=new http.c({Authorization:this.ifLogin.token_type+\" \"+this.ifLogin.access_token});return this.http.post(this.env.API_URL+\"auth/upload-documents\",postData,{headers:headers}).pipe(Object(tap.a)(user=>user))}addSimDetails(postData){const headers=new http.c({Authorization:this.ifLogin.token_type+\" \"+this.ifLogin.access_token});return this.http.post(this.env.API_URL+\"auth/add-sim_details\",postData,{headers:headers}).pipe(Object(tap.a)(user=>user))}}return SimService.ɵfac=function(t){return new(t||SimService)(core.Ob(http.a),core.Ob(env_service.a))},SimService.ɵprov=core.Db({token:SimService,factory:SimService.ɵfac,providedIn:\"root\"}),SimService})();var ngx=__webpack_require__(\"BLr9\"),payment_service=__webpack_require__(\"QzWm\"),alert_service=__webpack_require__(\"3LUQ\"),_ivy_ngcc_ngx=__webpack_require__(\"TzAO\"),call_number_ivy_ngcc_ngx=__webpack_require__(\"Wwn5\"),sms_ivy_ngcc_ngx=__webpack_require__(\"I7pt\"),Camera_ivy_ngcc_ngx=__webpack_require__(\"KqBo\");function SimSwapPage_span_17_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"span\"),core.Ib(1,\"img\",10),core.Jb()),2&rf){const ctx_r0=core.Ub();core.xb(1),core.Zb(\"src\",ctx_r0.photoFontSite,core.gc)}}function SimSwapPage_span_24_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"span\"),core.Ib(1,\"img\",10),core.Jb()),2&rf){const ctx_r1=core.Ub();core.xb(1),core.Zb(\"src\",ctx_r1.photoBackSite,core.gc)}}function SimSwapPage_span_31_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"span\"),core.Ib(1,\"img\",10),core.Jb()),2&rf){const ctx_r2=core.Ub();core.xb(1),core.Zb(\"src\",ctx_r2.OldSimOrGd,core.gc)}}function SimSwapPage_ion_item_32_Template(rf,ctx){if(1&rf){const _r6=core.Lb();core.Kb(0,\"ion-item\"),core.Kb(1,\"div\"),core.Kb(2,\"ion-button\",11),core.Sb(\"click\",(function(){return core.fc(_r6),core.Ub().uploadDocuments()})),core.jc(3,\"Upload Documents\"),core.Jb(),core.Jb(),core.Jb()}}function SimSwapPage_div_33_Template(rf,ctx){if(1&rf){const _r8=core.Lb();core.Kb(0,\"div\"),core.Kb(1,\"ion-item\"),core.Kb(2,\"ion-button\",12),core.Sb(\"click\",(function(){return core.fc(_r8),core.Ub().scannQeCode()})),core.jc(3,\"Scann QR Code\"),core.Jb(),core.Jb(),core.Kb(4,\"ion-item\"),core.Kb(5,\"ion-label\",13),core.jc(6,\"Customer Name\"),core.Jb(),core.Ib(7,\"ion-input\",14),core.Jb(),core.Kb(8,\"ion-item\"),core.Kb(9,\"ion-label\",13),core.jc(10,\"Customer Swap Phone Number\"),core.Jb(),core.Ib(11,\"ion-input\",15),core.Jb(),core.Kb(12,\"ion-item\"),core.Kb(13,\"ion-label\",13),core.jc(14,\"Customer Aadhar Number\"),core.Jb(),core.Ib(15,\"ion-input\",16),core.Jb(),core.Kb(16,\"ion-item\"),core.Kb(17,\"ion-label\",13),core.jc(18,\"Customer New Sim Number\"),core.Jb(),core.Ib(19,\"ion-input\",17),core.Jb(),core.Kb(20,\"ion-item\"),core.Kb(21,\"ion-label\"),core.jc(22,\"Customer Sex\"),core.Jb(),core.Kb(23,\"ion-select\",18),core.Kb(24,\"ion-select-option\",19),core.jc(25,\" Male \"),core.Jb(),core.Kb(26,\"ion-select-option\",20),core.jc(27,\" Fimale \"),core.Jb(),core.Kb(28,\"ion-select-option\",21),core.jc(29,\" Others \"),core.Jb(),core.Jb(),core.Jb(),core.Kb(30,\"ion-item\"),core.Kb(31,\"ion-label\",13),core.jc(32,\"Father Name (optional)\"),core.Jb(),core.Ib(33,\"ion-input\",22),core.Jb(),core.Kb(34,\"ion-item\"),core.Kb(35,\"ion-label\",13),core.jc(36,\"Customer Village (optional)\"),core.Jb(),core.Ib(37,\"ion-input\",23),core.Jb(),core.Kb(38,\"ion-item\"),core.Kb(39,\"ion-label\",13),core.jc(40,\"Customer Post Office (optional)\"),core.Jb(),core.Ib(41,\"ion-input\",24),core.Jb(),core.Kb(42,\"ion-item\"),core.Kb(43,\"ion-label\",13),core.jc(44,\"Customer Police Station (optional)\"),core.Jb(),core.Ib(45,\"ion-input\",25),core.Jb(),core.Kb(46,\"ion-item\"),core.Kb(47,\"ion-label\",13),core.jc(48,\"Customer Dist (optional)\"),core.Jb(),core.Ib(49,\"ion-input\",26),core.Jb(),core.Kb(50,\"ion-item\"),core.Kb(51,\"ion-label\",13),core.jc(52,\"Customer state (optional)\"),core.Jb(),core.Ib(53,\"ion-input\",27),core.Jb(),core.Kb(54,\"ion-item\"),core.Kb(55,\"ion-label\",13),core.jc(56,\"Customer Pin (optional)\"),core.Jb(),core.Ib(57,\"ion-input\",28),core.Jb(),core.Kb(58,\"ion-item\"),core.Kb(59,\"ion-label\"),core.jc(60,\"Customer DOB (optional)\"),core.Jb(),core.Ib(61,\"ion-datetime\",29),core.Jb(),core.Jb()}}const routes=[{path:\"\",component:(()=>{class SimSwapPage{constructor(SimService,platform,qrScanner,env,payment,loading,contacts,callNumber,sms,toastCtrl,modalController,camera,formBuilder,router){this.SimService=SimService,this.platform=platform,this.qrScanner=qrScanner,this.env=env,this.payment=payment,this.loading=loading,this.contacts=contacts,this.callNumber=callNumber,this.sms=sms,this.toastCtrl=toastCtrl,this.modalController=modalController,this.camera=camera,this.formBuilder=formBuilder,this.router=router,this.simSwapForm=this.formBuilder.group({c_name:[\"\",[fesm2015_forms.j.required]],c_swap_phone:[\"\",fesm2015_forms.j.required],c_new_sim_no:[\"\",fesm2015_forms.j.required],c_uid_number:[\"\",fesm2015_forms.j.required],c_sex:[\"\",fesm2015_forms.j.required],c_f_name:[\"\"],c_village:[\"\"],c_post:[\"\"],c_ps:[\"\"],c_dist:[\"\"],c_state:[\"\"],c_pin:[\"\"],c_dob:[\"\"],c_immage_id:[\"\"]}),this.paymetURL=this.env.paymetURL,this.platform.backButton.subscribeWithPriority(0,()=>{document.getElementsByTagName(\"body\")[0].style.opacity=\"1\",this.scannData.unsubscribe()})}doRefresh(event){console.log(\"Begin async operation\"),setTimeout(()=>{console.log(\"Async operation has ended\"),event.target.complete()},2e3)}captureFontImmage(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(imageData=>{this.photoFontSite=\"data:image/jpeg;base64,\"+imageData,this.uploadFontPhoto=imageData},err=>{console.log(err),this.loading.presentToastWarning(err)})}captureBackImmage(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(imageData=>{this.photoBackSite=\"data:image/jpeg;base64,\"+imageData,this.uploadBackPhoto=imageData},err=>{console.log(err),this.loading.presentToastWarning(err)})}captureOldsimOrGd(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(imageData=>{this.OldSimOrGd=\"data:image/jpeg;base64,\"+imageData,this.uploadSimOrGdPhoto=imageData},err=>{console.log(err),this.loading.presentToastWarning(err)})}scannQeCode(){this.qrScanner.prepare().then(status=>{status.authorized&&(this.qrScanner.show(),this.scannData=document.getElementsByTagName(\"body\")[0].style.opacity=\"0\",this.scannData=this.qrScanner.scan().subscribe(xmlData=>{document.getElementsByTagName(\"body\")[0].style.opacity=\"1\",this.qrScanner.hide(),this.scannData.unsubscribe();let xml=xmlData,qrJsonObj=(new x2js).xml2js(xml);this.qrText=qrJsonObj.PrintLetterBarcodeData,this.qrText&&(this.simSwapForm.controls.c_name.setValue(this.qrText?this.qrText._name:\"\"),this.simSwapForm.controls.c_uid_number.setValue(this.qrText?this.qrText._uid:\"\"),this.simSwapForm.controls.c_sex.setValue(this.qrText?this.qrText._gender:\"\"),this.simSwapForm.controls.c_f_name.setValue(this.qrText?this.qrText._gname:\"\"),this.simSwapForm.controls.c_village.setValue(this.qrText?this.qrText._vtc:\"\"),this.simSwapForm.controls.c_post.setValue(this.qrText?this.qrText._po:\"\"),this.simSwapForm.controls.c_ps.setValue(this.qrText?this.qrText._subdist:\"\"),this.simSwapForm.controls.c_dist.setValue(this.qrText?this.qrText._dist:\"\"),this.simSwapForm.controls.c_state.setValue(this.qrText?this.qrText._state:\"\"),this.simSwapForm.controls.c_pin.setValue(this.qrText?this.qrText._pc:\"\"),this.simSwapForm.controls.c_dob.setValue(this.qrText?this.qrText._dob:\"\"),document.getElementsByTagName(\"body\")[0].style.opacity=\"1\",this.scannData.unsubscribe())},err=>{alert(JSON.stringify(err))}))}).catch(e=>console.log(\"Error is\",e))}ionViewWillEnter(){}uploadDocuments(){this.loading.present();const DocumentData=new FormData;DocumentData.append(\"uploadFontPhoto\",this.uploadFontPhoto),DocumentData.append(\"uploadBackPhoto\",this.uploadBackPhoto),DocumentData.append(\"uploadSimOrGdPhoto\",this.uploadSimOrGdPhoto),this.SimService.uploadDocuments(DocumentData).subscribe(data=>{console.log(data),alert(data.image_id),alert(data.image_id[0].font_image),data.success&&(this.simSwapForm.controls.c_immage_id.setValue(data?data.image_id:\"\"),this.uploadId=data.image_id,this.loading.dismiss(),this.loading.presentToastSuccess(data.success)),data.error&&(this.loading.dismiss(),this.loading.presentToastError(data.error))},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}addSimSwapData(){this.loading.present(),this.SimService.addSimDetails(this.simSwapForm.value).subscribe(data=>{console.log(data),this.loading.dismiss(),data.success&&(this.loading.dismiss(),this.loading.presentToastSuccess(data.success),this.router.navigateByUrl(\"/show-products\")),data.error&&(this.loading.dismiss(),this.loading.presentToastWarning(data.error))},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}ngOnInit(){}}return SimSwapPage.ɵfac=function(t){return new(t||SimSwapPage)(core.Hb(sim_service_SimService),core.Hb(ionic_angular.W),core.Hb(ngx.a),core.Hb(env_service.a),core.Hb(payment_service.a),core.Hb(alert_service.a),core.Hb(_ivy_ngcc_ngx.c),core.Hb(call_number_ivy_ngcc_ngx.a),core.Hb(sms_ivy_ngcc_ngx.a),core.Hb(ionic_angular.ab),core.Hb(ionic_angular.T),core.Hb(Camera_ivy_ngcc_ngx.a),core.Hb(fesm2015_forms.a),core.Hb(fesm2015_router.g))},SimSwapPage.ɵcmp=core.Bb({type:SimSwapPage,selectors:[[\"app-sim-swap\"]],decls:36,vars:7,consts:[[\"slot\",\"start\"],[\"slot\",\"fixed\",3,\"ionRefresh\"],[\"pullingIcon\",\"chevron-down-circle-outline\",\"pullingText\",\"Pull to refresh\",\"s\",\"\",\"refreshingSpinner\",\"circles\"],[3,\"formGroup\",\"ngSubmit\"],[2,\"margin-top\",\"10px\"],[1,\"choseCamera\"],[\"name\",\"camera-outline\",1,\"choseCamera\",3,\"click\"],[4,\"ngIf\"],[\"name\",\"camera-outline\",3,\"click\"],[\"type\",\"submit\",\"shape\",\"round\",\"color\",\"success\",\"expand\",\"block\",3,\"disabled\"],[\"height\",\"60\",\"width\",\"60\",1,\"imageClasss\",3,\"src\"],[3,\"click\"],[\"size\",\"small\",\"color\",\"secondary\",\"shape\",\"round\",3,\"click\"],[\"position\",\"floating\"],[\"type\",\"text\",\"formControlName\",\"c_name\"],[\"type\",\"number\",\"formControlName\",\"c_swap_phone\"],[\"type\",\"number\",\"formControlName\",\"c_uid_number\"],[\"type\",\"number\",\"formControlName\",\"c_new_sim_no\"],[\"formControlName\",\"c_sex\",\"interface\",\"popover\",\"placeholder\",\"Select Gender\"],[\"value\",\"Male\"],[\"value\",\"Fimale\"],[\"value\",\"Others\"],[\"type\",\"text\",\"formControlName\",\"c_f_name\"],[\"type\",\"text\",\"formControlName\",\"c_village\"],[\"type\",\"text\",\"formControlName\",\"c_post\"],[\"type\",\"text\",\"formControlName\",\"c_ps\"],[\"type\",\"text\",\"formControlName\",\"c_dist\"],[\"type\",\"text\",\"formControlName\",\"c_state\"],[\"type\",\"number\",\"formControlName\",\"c_pin\"],[\"formControlName\",\"c_dob\",\"displayFormat\",\"DD/MM/YYYY\"]],template:function(rf,ctx){1&rf&&(core.Kb(0,\"ion-header\"),core.Kb(1,\"ion-toolbar\"),core.Kb(2,\"ion-buttons\",0),core.Ib(3,\"ion-menu-button\"),core.Jb(),core.Kb(4,\"ion-title\"),core.jc(5,\"Sim Swap\"),core.Jb(),core.Jb(),core.Jb(),core.Kb(6,\"ion-content\"),core.Kb(7,\"ion-refresher\",1),core.Sb(\"ionRefresh\",(function($event){return ctx.doRefresh($event)})),core.Ib(8,\"ion-refresher-content\",2),core.Jb(),core.Kb(9,\"form\",3),core.Sb(\"ngSubmit\",(function(){return ctx.addSimSwapData()})),core.Kb(10,\"ion-card\",4),core.Kb(11,\"ion-item\"),core.Kb(12,\"div\",5),core.Kb(13,\"ion-icon\",6),core.Sb(\"click\",(function(){return ctx.captureFontImmage()})),core.Jb(),core.Jb(),core.Kb(14,\"strong\"),core.jc(15,\"Capture Font Site\"),core.Jb(),core.Kb(16,\"div\"),core.ic(17,SimSwapPage_span_17_Template,2,1,\"span\",7),core.Jb(),core.Jb(),core.Kb(18,\"ion-item\"),core.Kb(19,\"div\",5),core.Kb(20,\"ion-icon\",8),core.Sb(\"click\",(function(){return ctx.captureBackImmage()})),core.Jb(),core.Jb(),core.Kb(21,\"strong\"),core.jc(22,\"Capture Back Site\"),core.Jb(),core.Kb(23,\"div\"),core.ic(24,SimSwapPage_span_24_Template,2,1,\"span\",7),core.Jb(),core.Jb(),core.Kb(25,\"ion-item\"),core.Kb(26,\"div\",5),core.Kb(27,\"ion-icon\",8),core.Sb(\"click\",(function(){return ctx.captureOldsimOrGd()})),core.Jb(),core.Jb(),core.Kb(28,\"strong\"),core.jc(29,\"Capture old SIM or GD copy\"),core.Jb(),core.Kb(30,\"div\"),core.ic(31,SimSwapPage_span_31_Template,2,1,\"span\",7),core.Jb(),core.Jb(),core.ic(32,SimSwapPage_ion_item_32_Template,4,0,\"ion-item\",7),core.ic(33,SimSwapPage_div_33_Template,62,0,\"div\",7),core.Jb(),core.Kb(34,\"ion-button\",9),core.jc(35,\"Submit\"),core.Jb(),core.Jb(),core.Jb()),2&rf&&(core.xb(9),core.Zb(\"formGroup\",ctx.simSwapForm),core.xb(8),core.Zb(\"ngIf\",ctx.photoFontSite),core.xb(7),core.Zb(\"ngIf\",ctx.photoBackSite),core.xb(7),core.Zb(\"ngIf\",ctx.OldSimOrGd),core.xb(1),core.Zb(\"ngIf\",ctx.OldSimOrGd&&ctx.photoBackSite&&ctx.photoFontSite),core.xb(1),core.Zb(\"ngIf\",ctx.uploadId),core.xb(1),core.Zb(\"disabled\",!ctx.simSwapForm.valid))},directives:[ionic_angular.o,ionic_angular.P,ionic_angular.d,ionic_angular.B,ionic_angular.O,ionic_angular.j,ionic_angular.E,ionic_angular.F,fesm2015_forms.k,fesm2015_forms.h,fesm2015_forms.c,ionic_angular.e,ionic_angular.t,ionic_angular.p,common.j,ionic_angular.c,ionic_angular.x,ionic_angular.s,ionic_angular.Z,fesm2015_forms.g,fesm2015_forms.b,ionic_angular.V,ionic_angular.I,ionic_angular.Y,ionic_angular.J,ionic_angular.k],styles:[\"ion-button[_ngcontent-%COMP%]{font-size:10px}.choseCamera[_ngcontent-%COMP%]{font-size:40px;margin-right:15px}.selectCamera[_ngcontent-%COMP%]{font-size:35px;margin-right:15px}.uploads[_ngcontent-%COMP%]{font-size:30px;margin-left:15px}.imageClasss[_ngcontent-%COMP%]{margin-left:10px;border-radius:25px;border:1px solid #00f}strong[_ngcontent-%COMP%]{font-size:10px}\"]}),SimSwapPage})()}];let sim_swap_routing_module_SimSwapPageRoutingModule=(()=>{class SimSwapPageRoutingModule{}return SimSwapPageRoutingModule.ɵmod=core.Fb({type:SimSwapPageRoutingModule}),SimSwapPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||SimSwapPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),SimSwapPageRoutingModule})(),sim_swap_module_SimSwapPageModule=(()=>{class SimSwapPageModule{}return SimSwapPageModule.ɵmod=core.Fb({type:SimSwapPageModule}),SimSwapPageModule.ɵinj=core.Eb({factory:function(t){return new(t||SimSwapPageModule)},imports:[[fesm2015_forms.i,fesm2015_router.i,http.b,common.b,fesm2015_forms.d,ionic_angular.Q,sim_swap_routing_module_SimSwapPageRoutingModule]]}),SimSwapPageModule})()}}]);","extractedComments":[]}