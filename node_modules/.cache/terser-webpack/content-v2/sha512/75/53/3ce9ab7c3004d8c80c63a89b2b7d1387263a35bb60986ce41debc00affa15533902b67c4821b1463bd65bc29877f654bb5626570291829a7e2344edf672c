{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{uTK4:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"AddProductPageModule\",(function(){return add_product_module_AddProductPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\"),alert_service=__webpack_require__(\"3LUQ\"),product_service=__webpack_require__(\"qL+e\");function AddProductPage_ion_select_option_15_Template(rf,ctx){if(1&rf&&(core.Ob(0,\"ion-select-option\",15),core.jc(1),core.Nb()),2&rf){const category_r3=ctx.$implicit;core.dc(\"value\",category_r3.id),core.xb(1),core.kc(category_r3.name)}}function AddProductPage_ion_select_option_21_Template(rf,ctx){if(1&rf&&(core.Ob(0,\"ion-select-option\",16),core.jc(1),core.Nb()),2&rf){const product_r4=ctx.$implicit;core.dc(\"value\",product_r4.id),core.xb(1),core.kc(product_r4.product_name)}}function AddProductPage_div_42_Template(rf,ctx){if(1&rf&&(core.Ob(0,\"div\",17),core.Kb(1,\"img\",18),core.Nb()),2&rf){const ctx_r2=core.Zb();core.xb(1),core.dc(\"src\",ctx_r2.image,core.gc)}}const routes=[{path:\"\",component:(()=>{class AddProductPage{constructor(loading,formBuilder,router,product){if(this.loading=loading,this.formBuilder=formBuilder,this.router=router,this.product=product,this.addProductForm=this.formBuilder.group({id:[\"\"],category_id:[\"\",[fesm2015_forms.n.required]],product_id:[\"\",[fesm2015_forms.n.required]],image:[\"\"],cost:[\"\",[fesm2015_forms.n.required]],sale_price:[\"\",[fesm2015_forms.n.required]],prouct_desc:[\"\"],qty:[\"\",[fesm2015_forms.n.required]]}),this.router.getCurrentNavigation().extras.state){let productsData=this.router.getCurrentNavigation().extras.state.product;this.editdata=productsData}console.log(this.editdata)}ionViewWillEnter(){this.getCategoryProducts(),this.addProductForm.controls.image.setValue(this.editdata?this.editdata.image:\"\"),this.addProductForm.controls.sale_price.setValue(this.editdata?this.editdata.sale_price:\"\"),this.addProductForm.controls.prouct_desc.setValue(this.editdata?this.editdata.product_description:\"\"),this.addProductForm.controls.qty.setValue(this.editdata?this.editdata.qty:\"\"),this.addProductForm.controls.cost.setValue(this.editdata?this.editdata.unit_price:\"\")}doRefresh(event){console.log(\"Begin async operation\"),setTimeout(()=>{console.log(\"Async operation has ended\"),event.target.complete()},2e3)}loadData(event){setTimeout(()=>{console.log(\"Done\"),console.log(event),event.target.complete()},2e3)}getCategoryProducts(){this.loading.present(),this.product.getCategoryProducts().subscribe(data=>{console.log(data.data),this.categoryProducts=data.data,this.loading.dismiss()},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.presentToastError(\"Server error.\"),this.loading.dismiss())})}selectProducts(catagory_id){console.log(catagory_id);for(let i=0;i<this.categoryProducts.length;i++)if(this.categoryProducts[i].id==catagory_id){this.addProductForm.controls.product_id.setValue(\"\"),this.products=this.categoryProducts[i].products;break}console.log(this.products)}selectProduct(product_id){this.addProductForm.controls.cost.setValue(\"\"),this.addProductForm.controls.image.setValue(\"\");for(let i=0;i<this.products.length;i++)if(this.products[i].id==product_id){this.selectPro=this.products[i];break}this.addProductForm.controls.cost.setValue(this.selectPro?this.selectPro.unit_price:\"\"),this.addProductForm.controls.image.setValue(this.selectPro?this.selectPro.image:\"\"),this.image=this.selectPro.image,console.log(this.addProductForm.value)}addProduct(){console.log(this.addProductForm.value),this.loading.present(),this.product.addNewProduct(this.addProductForm.value).subscribe(data=>{console.log(data),this.loading.dismiss(),\"success\"==data.type&&(this.loading.presentToastSuccess(data.msg),this.router.navigateByUrl(\"/dashboard\")),\"error\"==data.type&&this.loading.presentToastError(data.msg)},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}ngOnInit(){}}return AddProductPage.ɵfac=function(t){return new(t||AddProductPage)(core.Jb(alert_service.a),core.Jb(fesm2015_forms.b),core.Jb(fesm2015_router.g),core.Jb(product_service.a))},AddProductPage.ɵcmp=core.Db({type:AddProductPage,selectors:[[\"app-add-product\"]],decls:45,vars:5,consts:[[\"slot\",\"start\"],[\"slot\",\"fixed\",3,\"ionRefresh\"],[\"pullingText\",\"Pull to refresh\",\"refreshingSpinner\",\"circles\"],[1,\"mt-2\",3,\"formGroup\",\"ngSubmit\"],[\"interface\",\"popover\",\"placeholder\",\"Select Catagory\",\"formControlName\",\"category_id\",3,\"ngModelChange\"],[\"selected\",\"selected\",3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"interface\",\"popover\",\"placeholder\",\"Select Product Name\",\"formControlName\",\"product_id\",3,\"ngModelChange\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"position\",\"floating\"],[\"required\",\"true\",\"value\",\"Readonly\",\"readonly\",\"\",\"type\",\"number\",\"formControlName\",\"cost\"],[\"required\",\"true\",\"type\",\"number\",\"formControlName\",\"sale_price\"],[\"value\",\"Readonly\",\"readonly\",\"\",\"type\",\"text\",\"formControlName\",\"prouct_desc\"],[\"required\",\"true\",\"type\",\"number\",\"formControlName\",\"qty\"],[\"class\",\"imgStyle\",4,\"ngIf\"],[\"type\",\"submit\",\"shape\",\"round\",\"slot\",\"end\",2,\"margin-left\",\"61vw\",\"margin-bottom\",\"2px\",3,\"disabled\"],[\"selected\",\"selected\",3,\"value\"],[3,\"value\"],[1,\"imgStyle\"],[3,\"src\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,\"ion-header\"),core.Ob(1,\"ion-toolbar\"),core.Ob(2,\"ion-buttons\",0),core.Kb(3,\"ion-menu-button\"),core.Nb(),core.Ob(4,\"ion-title\"),core.jc(5,\"Add New Product\"),core.Nb(),core.Nb(),core.Nb(),core.Ob(6,\"ion-content\"),core.Ob(7,\"ion-refresher\",1),core.Wb(\"ionRefresh\",(function($event){return ctx.doRefresh($event)})),core.Kb(8,\"ion-refresher-content\",2),core.Nb(),core.Ob(9,\"form\",3),core.Wb(\"ngSubmit\",(function(){return ctx.addProduct()})),core.Ob(10,\"ion-card\"),core.Ob(11,\"ion-item\"),core.Ob(12,\"ion-label\"),core.jc(13,\"Product Catagory\"),core.Nb(),core.Ob(14,\"ion-select\",4),core.Wb(\"ngModelChange\",(function($event){return ctx.selectProducts($event)})),core.ic(15,AddProductPage_ion_select_option_15_Template,2,2,\"ion-select-option\",5),core.Nb(),core.Nb(),core.Nb(),core.Ob(16,\"ion-card\"),core.Ob(17,\"ion-item\"),core.Ob(18,\"ion-label\"),core.jc(19,\"Product Name\"),core.Nb(),core.Ob(20,\"ion-select\",6),core.Wb(\"ngModelChange\",(function($event){return ctx.selectProduct($event)})),core.ic(21,AddProductPage_ion_select_option_21_Template,2,2,\"ion-select-option\",7),core.Nb(),core.Nb(),core.Nb(),core.Ob(22,\"ion-card\"),core.Ob(23,\"ion-item\"),core.Ob(24,\"ion-label\",8),core.jc(25,\"Cost\"),core.Nb(),core.Kb(26,\"ion-input\",9),core.Nb(),core.Nb(),core.Ob(27,\"ion-card\"),core.Ob(28,\"ion-item\"),core.Ob(29,\"ion-label\",8),core.jc(30,\"Sale Price\"),core.Nb(),core.Kb(31,\"ion-input\",10),core.Nb(),core.Nb(),core.Ob(32,\"ion-card\"),core.Ob(33,\"ion-item\"),core.Ob(34,\"ion-label\",8),core.jc(35,\"Product Description\"),core.Nb(),core.Kb(36,\"ion-input\",11),core.Nb(),core.Nb(),core.Ob(37,\"ion-card\"),core.Ob(38,\"ion-item\"),core.Ob(39,\"ion-label\",8),core.jc(40,\"Current Inventory\"),core.Nb(),core.Kb(41,\"ion-input\",12),core.Nb(),core.Nb(),core.ic(42,AddProductPage_div_42_Template,2,1,\"div\",13),core.Ob(43,\"ion-button\",14),core.jc(44,\"Submit\"),core.Nb(),core.Nb(),core.Nb()),2&rf&&(core.xb(9),core.cc(\"formGroup\",ctx.addProductForm),core.xb(6),core.cc(\"ngForOf\",ctx.categoryProducts),core.xb(6),core.cc(\"ngForOf\",ctx.products),core.xb(21),core.cc(\"ngIf\",ctx.image),core.xb(1),core.cc(\"disabled\",!ctx.addProductForm.valid))},directives:[ionic_angular.m,ionic_angular.K,ionic_angular.d,ionic_angular.v,ionic_angular.J,ionic_angular.h,ionic_angular.y,ionic_angular.z,fesm2015_forms.o,fesm2015_forms.i,fesm2015_forms.d,ionic_angular.e,ionic_angular.r,ionic_angular.s,ionic_angular.F,ionic_angular.S,fesm2015_forms.h,fesm2015_forms.c,common.h,ionic_angular.q,ionic_angular.P,fesm2015_forms.m,ionic_angular.T,common.i,ionic_angular.c,ionic_angular.G],styles:[\"ion-item[_ngcontent-%COMP%]{border-radius:5px!important;font-size:4vw;border:1px solid #bdb8b8!important;--background:rgb(255 255 255)!important}.item-native[_ngcontent-%COMP%]{padding:16px}.item-inner[_ngcontent-%COMP%]{padding:0!important}ion-icon[_ngcontent-%COMP%]{margin:5vw 1vw 1vw 0}.imgStyle[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{height:14vh;width:14vh}ion-select[_ngcontent-%COMP%]{float:right;right:10px;position:absolute}\"]}),AddProductPage})()}];let add_product_routing_module_AddProductPageRoutingModule=(()=>{class AddProductPageRoutingModule{}return AddProductPageRoutingModule.ɵmod=core.Hb({type:AddProductPageRoutingModule}),AddProductPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||AddProductPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),AddProductPageRoutingModule})();var http=__webpack_require__(\"tk/3\");let add_product_module_AddProductPageModule=(()=>{class AddProductPageModule{}return AddProductPageModule.ɵmod=core.Hb({type:AddProductPageModule}),AddProductPageModule.ɵinj=core.Gb({factory:function(t){return new(t||AddProductPageModule)},imports:[[fesm2015_forms.l,fesm2015_router.i,http.b,common.b,fesm2015_forms.e,ionic_angular.L,add_product_routing_module_AddProductPageRoutingModule]]}),AddProductPageModule})()}}]);","extractedComments":[]}