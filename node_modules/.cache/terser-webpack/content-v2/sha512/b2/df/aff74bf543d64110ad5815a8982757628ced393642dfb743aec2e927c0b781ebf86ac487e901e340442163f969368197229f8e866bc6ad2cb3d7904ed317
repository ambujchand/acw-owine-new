{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{ltbM:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"PlaceOrderPageModule\",(function(){return place_order_module_PlaceOrderPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\"),alert_service=__webpack_require__(\"3LUQ\"),product_service=__webpack_require__(\"qL+e\");function PlaceOrderPage_ion_row_22_Template(rf,ctx){if(1&rf&&(core.Ob(0,\"ion-row\"),core.Ob(1,\"ion-col\",6),core.Ob(2,\"p\"),core.jc(3),core.Nb(),core.Nb(),core.Ob(4,\"ion-col\",6),core.Ob(5,\"p\"),core.jc(6),core.Nb(),core.Nb(),core.Ob(7,\"ion-col\",6),core.Ob(8,\"p\"),core.jc(9),core.Nb(),core.Nb(),core.Ob(10,\"ion-col\",6),core.Ob(11,\"p\"),core.jc(12),core.Nb(),core.Nb(),core.Nb()),2&rf){const order_r1=ctx.$implicit;core.xb(3),core.kc(order_r1.product_name),core.xb(3),core.kc(order_r1.order_qty),core.xb(3),core.lc(\"$\",order_r1.unit_price,\"\"),core.xb(3),core.lc(\"$\",order_r1.unit_price*order_r1.order_qty,\".00\")}}const routes=[{path:\"\",component:(()=>{class PlaceOrderPage{constructor(loading,formBuilder,router,product){this.loading=loading,this.formBuilder=formBuilder,this.router=router,this.product=product,this.router.getCurrentNavigation().extras.state&&(this.placeOrderList=this.router.getCurrentNavigation().extras.state.placeOrderList),this.chechOrdelList()}chechOrdelList(){if(console.log(this.placeOrderList),null==this.placeOrderList||null==this.placeOrderList)this.router.navigateByUrl(\"order-list\");else{let totalAmount=0,details=[];for(let i=0;i<this.placeOrderList.length;i++)totalAmount+=this.placeOrderList[i].order_qty*parseInt(this.placeOrderList[i].unit_price),details[i]={product_id:this.placeOrderList[i].id,total_amount:this.placeOrderList[i].unit_price*this.placeOrderList[i].order_qty,qty:this.placeOrderList[i].order_qty};this.totalAmount=totalAmount.toFixed(2),this.placeOrderDetails=details,console.log(totalAmount.toFixed(2)),console.log(details)}}placeOrder(){this.loading.present();const postData=new FormData;postData.append(\"order_number\",\"ace_wine\"+9999*Math.random()),postData.append(\"required_date\",\"\"),postData.append(\"sell_tex\",\"\"),postData.append(\"transact_status\",\"1\"),postData.append(\"total_amount\",this.totalAmount),postData.append(\"order_details\",JSON.stringify(this.placeOrderDetails)),this.product.placeOrder(postData).subscribe(data=>{console.log(data),this.loading.dismiss(),data.success&&(this.loading.presentToastSuccess(data.success),localStorage.removeItem(\"orderDetails\"),this.router.navigate([\"/order-tracking\"],{state:{order_id:data.order_id}})),data.error&&this.loading.presentToastError(data.error)},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.presentToastError(\"Server error.\"),this.loading.dismiss())})}ngOnInit(){}}return PlaceOrderPage.ɵfac=function(t){return new(t||PlaceOrderPage)(core.Jb(alert_service.a),core.Jb(fesm2015_forms.b),core.Jb(router.g),core.Jb(product_service.a))},PlaceOrderPage.ɵcmp=core.Db({type:PlaceOrderPage,selectors:[[\"app-place-order\"]],decls:40,vars:5,consts:[[3,\"translucent\"],[\"slot\",\"start\"],[3,\"fullscreen\"],[2,\"margin-left\",\"3vh\"],[4,\"ngFor\",\"ngForOf\"],[2,\"margin-top\",\"4vh\"],[1,\"orderStype\"],[\"expand\",\"full\",1,\"orderButton\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,\"ion-header\",0),core.Ob(1,\"ion-toolbar\"),core.Ob(2,\"ion-buttons\",1),core.Kb(3,\"ion-menu-button\"),core.Nb(),core.Ob(4,\"ion-title\"),core.jc(5,\"Your Orders\"),core.Nb(),core.Nb(),core.Nb(),core.Ob(6,\"ion-content\",2),core.Ob(7,\"ion-list\",3),core.Ob(8,\"ion-grid\"),core.Ob(9,\"ion-row\"),core.Ob(10,\"ion-col\"),core.Ob(11,\"b\"),core.jc(12,\"Product\"),core.Nb(),core.Nb(),core.Ob(13,\"ion-col\"),core.Ob(14,\"b\"),core.jc(15,\"Quantity\"),core.Nb(),core.Nb(),core.Ob(16,\"ion-col\"),core.Ob(17,\"b\"),core.jc(18,\"Unit Price\"),core.Nb(),core.Nb(),core.Ob(19,\"ion-col\"),core.Ob(20,\"b\"),core.jc(21,\"Price\"),core.Nb(),core.Nb(),core.Nb(),core.ic(22,PlaceOrderPage_ion_row_22_Template,13,4,\"ion-row\",4),core.Ob(23,\"ion-row\",5),core.Ob(24,\"ion-col\",6),core.Ob(25,\"p\"),core.jc(26,\"Subtotal : \"),core.Nb(),core.Kb(27,\"br\"),core.Ob(28,\"p\"),core.jc(29,\"Total : \"),core.Nb(),core.Nb(),core.Kb(30,\"ion-col\",6),core.Kb(31,\"ion-col\",6),core.Ob(32,\"ion-col\",6),core.Ob(33,\"p\"),core.jc(34),core.Nb(),core.Kb(35,\"br\"),core.Ob(36,\"p\"),core.jc(37),core.Nb(),core.Nb(),core.Nb(),core.Nb(),core.Nb(),core.Ob(38,\"ion-button\",7),core.Wb(\"click\",(function(){return ctx.placeOrder()})),core.jc(39,\"Place Order\"),core.Nb(),core.Nb()),2&rf&&(core.cc(\"translucent\",!0),core.xb(6),core.cc(\"fullscreen\",!0),core.xb(16),core.cc(\"ngForOf\",ctx.placeOrderList),core.xb(12),core.lc(\"$\",ctx.totalAmount,\"\"),core.xb(3),core.lc(\"$\",ctx.totalAmount,\"\"))},directives:[ionic_angular.m,ionic_angular.K,ionic_angular.d,ionic_angular.v,ionic_angular.J,ionic_angular.h,ionic_angular.t,ionic_angular.l,ionic_angular.B,ionic_angular.g,common.h,ionic_angular.c],styles:[\"ion-col[_ngcontent-%COMP%]{padding:1px;margin:1px;font-size:15px}.orderStype[_ngcontent-%COMP%]{color:#6b3d1a;font-size:15px}p[_ngcontent-%COMP%]{padding:0;margin:0}.orderButton[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:46px;font-size:15px;margin:0;color:#ffcc6a;text-transform:capitalize}\"]}),PlaceOrderPage})()}];let place_order_routing_module_PlaceOrderPageRoutingModule=(()=>{class PlaceOrderPageRoutingModule{}return PlaceOrderPageRoutingModule.ɵmod=core.Hb({type:PlaceOrderPageRoutingModule}),PlaceOrderPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||PlaceOrderPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),PlaceOrderPageRoutingModule})(),place_order_module_PlaceOrderPageModule=(()=>{class PlaceOrderPageModule{}return PlaceOrderPageModule.ɵmod=core.Hb({type:PlaceOrderPageModule}),PlaceOrderPageModule.ɵinj=core.Gb({factory:function(t){return new(t||PlaceOrderPageModule)},imports:[[common.b,fesm2015_forms.e,ionic_angular.L,place_order_routing_module_PlaceOrderPageRoutingModule]]}),PlaceOrderPageModule})()}}]);","extractedComments":[]}