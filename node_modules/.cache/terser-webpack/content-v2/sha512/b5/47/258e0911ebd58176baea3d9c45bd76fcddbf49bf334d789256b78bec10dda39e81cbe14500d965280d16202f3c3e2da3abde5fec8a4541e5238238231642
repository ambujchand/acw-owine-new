{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{\"2gon\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"AddProductPageModule\",(function(){return add_product_module_AddProductPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),add_brand_page=__webpack_require__(\"hHli\"),add_category_page=__webpack_require__(\"0rZM\"),core=__webpack_require__(\"fXoL\"),ngx=__webpack_require__(\"FAH8\"),_ivy_ngcc_ngx=__webpack_require__(\"KqBo\"),alert_service=__webpack_require__(\"3LUQ\"),product_service=__webpack_require__(\"OyHp\");function AddProductPage_span_17_Template(rf,ctx){if(1&rf){const _r3=core.Lb();core.Kb(0,\"span\"),core.Ib(1,\"img\",10),core.Kb(2,\"ion-icon\",11),core.Sb(\"click\",(function(){return core.dc(_r3),core.Ub().uploadsTakePhoto()})),core.Jb(),core.Jb()}if(2&rf){const ctx_r0=core.Ub();core.xb(1),core.Xb(\"src\",ctx_r0.photo,core.ec)}}function AddProductPage_div_18_ion_select_6_ion_select_option_1_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"ion-select-option\",28),core.hc(1),core.Jb()),2&rf){const brand_r7=ctx.$implicit;core.Yb(\"value\",brand_r7.id),core.xb(1),core.ic(brand_r7.brand_name)}}function AddProductPage_div_18_ion_select_6_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"ion-select\",26),core.gc(1,AddProductPage_div_18_ion_select_6_ion_select_option_1_Template,2,2,\"ion-select-option\",27),core.Jb()),2&rf){const ctx_r4=core.Ub(2);core.xb(1),core.Xb(\"ngForOf\",ctx_r4.brandWiseCategories)}}function AddProductPage_div_18_ion_select_12_ion_select_option_1_Template(rf,ctx){if(1&rf&&(core.Kb(0,\"ion-select-option\",28),core.hc(1),core.Jb()),2&rf){const category_r9=ctx.$implicit;core.Yb(\"value\",category_r9.id),core.xb(1),core.ic(category_r9.category_name)}}function AddProductPage_div_18_ion_select_12_Template(rf,ctx){if(1&rf){const _r11=core.Lb();core.Kb(0,\"ion-select\",29),core.Sb(\"click\",(function(){return core.dc(_r11),core.Ub(2).pushCategory()})),core.gc(1,AddProductPage_div_18_ion_select_12_ion_select_option_1_Template,2,2,\"ion-select-option\",27),core.Jb()}if(2&rf){const ctx_r5=core.Ub(2);core.xb(1),core.Xb(\"ngForOf\",ctx_r5.selectedCategories)}}function AddProductPage_div_18_Template(rf,ctx){if(1&rf){const _r13=core.Lb();core.Kb(0,\"div\"),core.Kb(1,\"ion-item\"),core.Kb(2,\"ion-label\"),core.hc(3,\"Brand Name\"),core.Jb(),core.Kb(4,\"ion-button\",12),core.Sb(\"click\",(function(){return core.dc(_r13),core.Ub().addBrand()})),core.hc(5,\"+\"),core.Jb(),core.gc(6,AddProductPage_div_18_ion_select_6_Template,2,1,\"ion-select\",13),core.Jb(),core.Kb(7,\"ion-item\"),core.Kb(8,\"ion-label\"),core.hc(9,\"Category Name\"),core.Jb(),core.Kb(10,\"ion-button\",14),core.Sb(\"click\",(function(){return core.dc(_r13),core.Ub().addCategory()})),core.hc(11,\"+\"),core.Jb(),core.gc(12,AddProductPage_div_18_ion_select_12_Template,2,1,\"ion-select\",15),core.Jb(),core.Kb(13,\"ion-item\"),core.Kb(14,\"ion-label\"),core.hc(15,\"Product Type\"),core.Jb(),core.Kb(16,\"ion-select\",16),core.Kb(17,\"ion-select-option\",17),core.hc(18,\" Par KG \"),core.Jb(),core.Kb(19,\"ion-select-option\",18),core.hc(20,\" Par Piece \"),core.Jb(),core.Kb(21,\"ion-select-option\",19),core.hc(22,\" Par Quintal \"),core.Jb(),core.Jb(),core.Jb(),core.Kb(23,\"ion-item\"),core.Kb(24,\"ion-label\",20),core.hc(25,\"Product Name\"),core.Jb(),core.Kb(26,\"ion-input\",21),core.Sb(\"click\",(function(){return core.dc(_r13),core.Ub().setCategoryName()})),core.Jb(),core.Jb(),core.Kb(27,\"ion-item\"),core.Kb(28,\"ion-label\",20),core.hc(29,\"Purchase Price\"),core.Jb(),core.Ib(30,\"ion-input\",22),core.Jb(),core.Kb(31,\"ion-item\"),core.Kb(32,\"ion-label\",20),core.hc(33,\"Selling Price\"),core.Jb(),core.Ib(34,\"ion-input\",23),core.Jb(),core.Kb(35,\"ion-item\"),core.Kb(36,\"ion-label\",20),core.hc(37,\"Disccount Selling Price\"),core.Jb(),core.Ib(38,\"ion-input\",24),core.Jb(),core.Kb(39,\"ion-item\"),core.Kb(40,\"ion-label\",20),core.hc(41,\"Quantity\"),core.Jb(),core.Ib(42,\"ion-input\",25),core.Jb(),core.Jb()}if(2&rf){const ctx_r1=core.Ub();core.xb(6),core.Xb(\"ngIf\",\"\"!=ctx_r1.brandWiseCategories),core.xb(6),core.Xb(\"ngIf\",\"\"!=ctx_r1.brandWiseCategories)}}const routes=[{path:\"\",component:(()=>{class AddProductPage{constructor(modalController,file,camera,loading,formBuilder,router,product){this.modalController=modalController,this.file=file,this.camera=camera,this.loading=loading,this.formBuilder=formBuilder,this.router=router,this.product=product,this.addProductForm=this.formBuilder.group({shop_id:[\"\",[fesm2015_forms.j.required]],brand_id:[\"\",[fesm2015_forms.j.required]],category_id:[\"\",fesm2015_forms.j.required],image_id:[\"\"],brand_name:[\"\",fesm2015_forms.j.required],category_name:[\"\",fesm2015_forms.j.required],product_name:[\"\",fesm2015_forms.j.required],product_type:[\"\",fesm2015_forms.j.required],purchase_price:[\"\",fesm2015_forms.j.required],selling_price:[\"\",fesm2015_forms.j.required],disc_sell_price:[\"\",fesm2015_forms.j.required],qty:[\"\",fesm2015_forms.j.required],total_pur_price:[\"\"]}),this.ifUploadPhoto=!1}doRefresh(event){console.log(\"Begin async operation\"),setTimeout(()=>{console.log(\"Async operation has ended\"),event.target.complete()},2e3)}captureImage(){this.camera.getPicture({quality:30,allowEdit:!0,saveToPhotoAlbum:!0,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(imageData=>{this.photo=\"data:image/jpeg;base64,\"+imageData,this.uploadPhoto=imageData},err=>{console.log(err),this.loading.presentToastWarning(err)})}takePhoto(){this.camera.getPicture({quality:30,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0}).then(dataImage=>{this.photo=\"data:image/jpeg;base64,\"+dataImage,this.uploadPhoto=dataImage},err=>{})}ionViewWillEnter(){let shop=JSON.parse(localStorage.getItem(\"shop\"));this.shops=shop,this.addProductForm.controls.shop_id.setValue(this.shops?this.shops.id[0].id:\"\"),console.log(this.addProductForm.value),this.brandWiseCategory()}brandWiseCategory(){this.loading.present(),this.product.brandWiseCategory().subscribe(data=>{console.log(data),this.brandWiseCategories=data,this.loading.dismiss()},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}pushCategory(){for(let i=0;i<this.brandWiseCategories.length;i++)this.brandWiseCategories[i].id==this.addProductForm.value.brand_id&&(this.selectedCategories=this.brandWiseCategories[i].categories,this.addProductForm.controls.brand_name.setValue(this.brandWiseCategories[i]?this.brandWiseCategories[i].brand_name:\"\"))}setCategoryName(){if(null!=this.selectedCategories){let catagory_id=this.addProductForm.value.category_id;for(let i=0;i<this.selectedCategories.length;i++)catagory_id==this.selectedCategories[i].id&&this.addProductForm.controls.category_name.setValue(this.selectedCategories[i]?this.selectedCategories[i].category_name:\"\")}}uploadsTakePhoto(){this.loading.present();const productData=new FormData;productData.append(\"image\",this.uploadPhoto),this.product.uploadTakePhoto(productData).subscribe(data=>{console.log(data),data.success&&(this.addProductForm.controls.image_id.setValue(data.success?data.image_id:null),this.loading.dismiss(),this.ifUploadPhoto=!0,this.loading.presentToastSuccess(data.success)),data.error&&(this.loading.dismiss(),this.loading.presentToastError(data.error))},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}addProduct(){this.addProductForm.controls.total_pur_price.setValue(this.addProductForm.value.purchase_price*this.addProductForm.value.qty||null),console.log(this.addProductForm.value),this.loading.present(),this.product.addProduct(this.addProductForm.value).subscribe(data=>{console.log(data),data.success&&(this.loading.dismiss(),this.loading.presentToastSuccess(data.success),this.router.navigateByUrl(\"/show-products\")),data.error&&(this.loading.dismiss(),this.loading.presentToastWarning(data.error))},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.dismiss(),this.loading.presentToastError(\"Server error.\"))})}addBrand(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const modal=yield this.modalController.create({component:add_brand_page.a,cssClass:\"my-custom-class\",componentProps:{addForProduct:\"productPage\"},swipeToClose:!0});return modal.onDidDismiss().then(data=>{console.log(data),this.brandWiseCategory()}),yield modal.present()}))}addCategory(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const modal=yield this.modalController.create({component:add_category_page.a,cssClass:\"my-custom-class\",componentProps:{},swipeToClose:!0});return modal.onDidDismiss().then(data=>{console.log(data),this.brandWiseCategory()}),yield modal.present()}))}ngOnInit(){}}return AddProductPage.ɵfac=function(t){return new(t||AddProductPage)(core.Hb(ionic_angular.R),core.Hb(ngx.a),core.Hb(_ivy_ngcc_ngx.a),core.Hb(alert_service.a),core.Hb(fesm2015_forms.a),core.Hb(fesm2015_router.g),core.Hb(product_service.a))},AddProductPage.ɵcmp=core.Bb({type:AddProductPage,selectors:[[\"app-add-product\"]],decls:21,vars:4,consts:[[\"slot\",\"start\"],[\"slot\",\"fixed\",3,\"ionRefresh\"],[\"pullingIcon\",\"chevron-down-circle-outline\",\"pullingText\",\"Pull to refresh\",\"refreshingSpinner\",\"circles\"],[3,\"formGroup\",\"ngSubmit\"],[2,\"margin-top\",\"10px\"],[\"name\",\"camera-outline\",1,\"choseCamera\",3,\"click\"],[1,\"selectCamera\"],[\"name\",\"image-outline\",3,\"click\"],[4,\"ngIf\"],[\"type\",\"submit\",\"shape\",\"round\",\"color\",\"success\",\"expand\",\"block\",3,\"disabled\"],[\"height\",\"60\",\"width\",\"60\",1,\"imageClasss\",3,\"src\"],[\"name\",\"cloud-upload-outline\",1,\"uploads\",3,\"click\"],[\"size\",\"small\",3,\"click\"],[\"formControlName\",\"brand_id\",\"interface\",\"popover\",\"placeholder\",\"Select Brand\",4,\"ngIf\"],[3,\"click\"],[\"formControlName\",\"category_id\",\"interface\",\"popover\",\"placeholder\",\"Select Category\",3,\"click\",4,\"ngIf\"],[\"formControlName\",\"product_type\",\"interface\",\"popover\",\"placeholder\",\"Select Brand\"],[\"value\",\"Par KG\"],[\"value\",\"Par Piece\"],[\"value\",\"Par Quintal\"],[\"position\",\"floating\"],[\"type\",\"name\",\"formControlName\",\"product_name\",3,\"click\"],[\"type\",\"number\",\"formControlName\",\"purchase_price\"],[\"type\",\"number\",\"formControlName\",\"selling_price\"],[\"type\",\"number\",\"formControlName\",\"disc_sell_price\"],[\"type\",\"number\",\"formControlName\",\"qty\"],[\"formControlName\",\"brand_id\",\"interface\",\"popover\",\"placeholder\",\"Select Brand\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"value\"],[\"formControlName\",\"category_id\",\"interface\",\"popover\",\"placeholder\",\"Select Category\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Kb(0,\"ion-header\"),core.Kb(1,\"ion-toolbar\"),core.Kb(2,\"ion-buttons\",0),core.Ib(3,\"ion-menu-button\"),core.Jb(),core.Kb(4,\"ion-title\"),core.hc(5,\"Add Product\"),core.Jb(),core.Jb(),core.Jb(),core.Kb(6,\"ion-content\"),core.Kb(7,\"ion-refresher\",1),core.Sb(\"ionRefresh\",(function($event){return ctx.doRefresh($event)})),core.Ib(8,\"ion-refresher-content\",2),core.Jb(),core.Kb(9,\"form\",3),core.Sb(\"ngSubmit\",(function(){return ctx.addProduct()})),core.Kb(10,\"ion-card\",4),core.Kb(11,\"ion-item\"),core.Kb(12,\"div\"),core.Kb(13,\"ion-icon\",5),core.Sb(\"click\",(function(){return ctx.captureImage()})),core.Jb(),core.Jb(),core.Kb(14,\"div\",6),core.Kb(15,\"ion-icon\",7),core.Sb(\"click\",(function(){return ctx.takePhoto()})),core.Jb(),core.Jb(),core.Kb(16,\"div\"),core.gc(17,AddProductPage_span_17_Template,3,1,\"span\",8),core.Jb(),core.Jb(),core.gc(18,AddProductPage_div_18_Template,43,2,\"div\",8),core.Jb(),core.Kb(19,\"ion-button\",9),core.hc(20,\"Submit\"),core.Jb(),core.Jb(),core.Jb()),2&rf&&(core.xb(9),core.Xb(\"formGroup\",ctx.addProductForm),core.xb(8),core.Xb(\"ngIf\",ctx.photo),core.xb(1),core.Xb(\"ngIf\",ctx.ifUploadPhoto),core.xb(1),core.Xb(\"disabled\",!ctx.addProductForm.valid))},directives:[ionic_angular.m,ionic_angular.N,ionic_angular.c,ionic_angular.z,ionic_angular.M,ionic_angular.i,ionic_angular.C,ionic_angular.D,fesm2015_forms.k,fesm2015_forms.h,fesm2015_forms.c,ionic_angular.d,ionic_angular.r,ionic_angular.n,common.i,ionic_angular.b,ionic_angular.v,ionic_angular.G,ionic_angular.W,fesm2015_forms.g,fesm2015_forms.b,ionic_angular.H,ionic_angular.q,ionic_angular.X,ionic_angular.T,common.h],styles:[\".choseCamera[_ngcontent-%COMP%]{font-size:40px;margin-right:15px}.selectCamera[_ngcontent-%COMP%]{font-size:35px;margin-right:15px}.uploads[_ngcontent-%COMP%]{font-size:30px;margin-left:15px}.imageClasss[_ngcontent-%COMP%]{margin-left:10px;border-radius:25px;border:1px solid #00f}\"]}),AddProductPage})()}];let add_product_routing_module_AddProductPageRoutingModule=(()=>{class AddProductPageRoutingModule{}return AddProductPageRoutingModule.ɵmod=core.Fb({type:AddProductPageRoutingModule}),AddProductPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||AddProductPageRoutingModule)},imports:[[fesm2015_router.i.forChild(routes)],fesm2015_router.i]}),AddProductPageRoutingModule})();var http=__webpack_require__(\"tk/3\");let add_product_module_AddProductPageModule=(()=>{class AddProductPageModule{}return AddProductPageModule.ɵmod=core.Fb({type:AddProductPageModule}),AddProductPageModule.ɵinj=core.Eb({factory:function(t){return new(t||AddProductPageModule)},imports:[[fesm2015_forms.i,fesm2015_router.i,http.b,common.b,fesm2015_forms.d,ionic_angular.O,add_product_routing_module_AddProductPageRoutingModule]]}),AddProductPageModule})()}}]);","extractedComments":[]}