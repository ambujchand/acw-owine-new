{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{rD2m:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"ProductListPageModule\",(function(){return product_list_module_ProductListPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\"),alert_service=__webpack_require__(\"3LUQ\"),product_service=__webpack_require__(\"qL+e\");function ProductListPage_ion_row_12_Template(rf,ctx){if(1&rf){const _r3=core.Pb();core.Ob(0,\"ion-row\",9),core.Ob(1,\"ion-col\",10),core.Kb(2,\"img\",11),core.Nb(),core.Ob(3,\"ion-col\",12),core.Wb(\"click\",(function(){core.fc(_r3);const product_r1=ctx.$implicit;return core.Zb().productDetails(product_r1)})),core.Ob(4,\"b\"),core.jc(5),core.Nb(),core.Ob(6,\"p\"),core.jc(7),core.Nb(),core.Ob(8,\"p\"),core.jc(9),core.Nb(),core.Nb(),core.Nb()}if(2&rf){const product_r1=ctx.$implicit;core.xb(2),core.dc(\"src\",product_r1.image,core.gc),core.xb(3),core.kc(product_r1.product_name),core.xb(2),core.lc(\"Available Quantity : \",product_r1.qty_per_unit,\"\"),core.xb(2),core.lc(\"Price : $ \",product_r1.unit_price,\"\")}}const routes=[{path:\"\",component:(()=>{class ProductListPage{constructor(loading,router,product){this.loading=loading,this.router=router,this.product=product,this.allProducts=[],this.router.getCurrentNavigation().extras.state&&(this.categoryId=this.router.getCurrentNavigation().extras.state.categoryId,this.cateloguePage=this.router.getCurrentNavigation().extras.state.cataloguePage,this.routerUrl=this.router.getCurrentNavigation().extras.state.routerUrl,console.log(this.routerUrl),console.log(this.categoryId),console.log(this.cateloguePage))}ionViewWillEnter(){this.checkCatagoryId(),1==this.cateloguePage?this.getCatelogueProductDetails():this.getCategoryDetails()}checkCatagoryId(){this.categoryId||this.router.navigateByUrl(\"/product-catagory\")}doRefresh(event){console.log(\"Begin async operation\"),this.getCategoryDetails(),setTimeout(()=>{console.log(\"Async operation has ended\"),event.target.complete()},2e3)}loadData(event){setTimeout(()=>{console.log(\"Done\"),console.log(event),this.getCategoryDetails(),this.products.length==this.products.length&&(event.target.disabled=!0),event.target.complete()},2e3)}findProductName(event){if(console.log(this.allProducts),event.target.value.length>0){var data=[];console.log(this.products);for(let i=0;i<this.products.length;i++)this.products[i].product_name.toLowerCase().slice(0,event.target.value.length)==event.target.value.toLowerCase()&&data.push(this.products[i]);this.allProducts=data,console.log(this.allProducts)}else this.allProducts=this.products}getCatelogueProductDetails(){if(\"\"!=this.categoryId){this.loading.present();const postData=new FormData;postData.append(\"category_id\",this.categoryId),postData.append(\"skip_id\",JSON.stringify(this.value)),this.product.catalogueProducts(postData).subscribe(data=>{this.allProducts=data.data,this.products=data.data,data.length>0&&(this.value=this.value+data.data.length,this.allProducts.push(data.data)),this.loading.dismiss()},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.presentToastError(\"Server error.\"),this.loading.dismiss())})}else this.router.navigateByUrl(\"product-catagory\")}getCategoryDetails(){if(\"\"!=this.categoryId){this.loading.present();const postData=new FormData;postData.append(\"category_id\",this.categoryId),postData.append(\"skip_id\",JSON.stringify(this.value)),this.product.getProductDetails(postData).subscribe(data=>{this.allProducts=data.data,this.products=data.data,data.length>0&&(this.value=this.value+data.data.length,this.allProducts.push(data.data)),this.loading.dismiss()},onerror=>{0==onerror.status?(this.loading.presentToastWarning(\"check your internet connection.\"),this.loading.dismiss()):500==onerror.status&&(this.loading.presentToastError(\"Server error.\"),this.loading.dismiss())})}else this.router.navigateByUrl(\"product-catagory\")}productDetails(product){console.log(product),console.log(\"ooooo\"),this.router.navigate([\"/product-details\"],{state:{productDetails:product,routerUrl:this.routerUrl}})}ngOnInit(){}}return ProductListPage.ɵfac=function(t){return new(t||ProductListPage)(core.Jb(alert_service.a),core.Jb(router.g),core.Jb(product_service.a))},ProductListPage.ɵcmp=core.Db({type:ProductListPage,selectors:[[\"app-product-list\"]],decls:15,vars:3,consts:[[3,\"translucent\"],[\"slot\",\"start\"],[3,\"fullscreen\"],[\"slot\",\"fixed\",3,\"ionRefresh\"],[\"pullingText\",\"Pull to refresh\",\"refreshingSpinner\",\"circles\"],[\"showCancelButton\",\"focus\",3,\"ionInput\"],[\"style\",\"background-color: #FAFAFA;\",4,\"ngFor\",\"ngForOf\"],[\"threshold\",\"100px\",3,\"ionInfinite\"],[\"loadingSpinner\",\"bubbles\",\"loadingText\",\"Loading...\"],[2,\"background-color\",\"#FAFAFA\"],[\"size\",\"3\"],[1,\"imageSize\",3,\"src\"],[1,\"textClass\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Ob(0,\"ion-header\",0),core.Ob(1,\"ion-toolbar\"),core.Ob(2,\"ion-buttons\",1),core.Kb(3,\"ion-menu-button\"),core.Nb(),core.Ob(4,\"ion-title\"),core.jc(5,\"Product List\"),core.Nb(),core.Nb(),core.Nb(),core.Ob(6,\"ion-content\",2),core.Ob(7,\"ion-refresher\",3),core.Wb(\"ionRefresh\",(function($event){return ctx.doRefresh($event)})),core.Kb(8,\"ion-refresher-content\",4),core.Nb(),core.Ob(9,\"ion-searchbar\",5),core.Wb(\"ionInput\",(function($event){return ctx.findProductName($event)})),core.Nb(),core.Ob(10,\"ion-list\"),core.Ob(11,\"ion-grid\"),core.ic(12,ProductListPage_ion_row_12_Template,10,4,\"ion-row\",6),core.Nb(),core.Nb(),core.Ob(13,\"ion-infinite-scroll\",7),core.Wb(\"ionInfinite\",(function($event){return ctx.loadData($event)})),core.Kb(14,\"ion-infinite-scroll-content\",8),core.Nb(),core.Nb()),2&rf&&(core.cc(\"translucent\",!0),core.xb(6),core.cc(\"fullscreen\",!0),core.xb(6),core.cc(\"ngForOf\",ctx.allProducts))},directives:[ionic_angular.m,ionic_angular.K,ionic_angular.d,ionic_angular.v,ionic_angular.J,ionic_angular.h,ionic_angular.y,ionic_angular.z,ionic_angular.C,ionic_angular.T,ionic_angular.t,ionic_angular.l,common.h,ionic_angular.o,ionic_angular.p,ionic_angular.B,ionic_angular.g],styles:[\".trash[_ngcontent-%COMP%]{color:red;margin-right:2vw}.edit[_ngcontent-%COMP%], .trash[_ngcontent-%COMP%]{font-size:6vw}ion-row[_ngcontent-%COMP%]{background-color:#fafafa;margin-bottom:2vw}b[_ngcontent-%COMP%]{color:#6b3d1a}.iconClass[_ngcontent-%COMP%]{padding:0;margin:5vw 0 0}p[_ngcontent-%COMP%]{padding:1px;margin:1px;font-size:4vw}.imageSize[_ngcontent-%COMP%]{height:22vw;width:20vw}\"]}),ProductListPage})()}];let product_list_routing_module_ProductListPageRoutingModule=(()=>{class ProductListPageRoutingModule{}return ProductListPageRoutingModule.ɵmod=core.Hb({type:ProductListPageRoutingModule}),ProductListPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||ProductListPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),ProductListPageRoutingModule})(),product_list_module_ProductListPageModule=(()=>{class ProductListPageModule{}return ProductListPageModule.ɵmod=core.Hb({type:ProductListPageModule}),ProductListPageModule.ɵinj=core.Gb({factory:function(t){return new(t||ProductListPageModule)},imports:[[common.b,fesm2015_forms.e,ionic_angular.L,product_list_routing_module_ProductListPageRoutingModule]]}),ProductListPageModule})()}}]);","extractedComments":[]}